<!doctype html>
<html>
<head>

<style>


body{
	margin: 0;
	padding: 0;
	text-align: center;
	font-size: 16px;
}

.l-container {
	margin: 0 auto;
	text-align: left;
	width: 600px;
}

h1 {
	font-size: 48px;
	text-align: center;
}

label {
	display: block;
	font-size: 20px;
}

	
</style>

</head>

<body>

<div class="l-container">

	<h1>Lazy Compressor</h1>

	<fieldset>

		<div class="l-field">
			<label for="source">Source</label>
			<textarea id="source" rows="10" cols="80"></textarea>
			<br/>
			<button id="compile">Compile</button>
		</div>



		<div class="l-field">
			<label for="result">Result</label>
			<textarea id="result" rows="10" cols="80"></textarea>
		</div>

		<div class="l-field">
			<label>Stats</label>
			<ul>
				<li>Source Size: <span id="source-size"></span></li>
				<li>Result Size: <span id="result-size"></span></li>
				<li>Percentage: <span id="diff"></span></li>
			</ul>
		</div>

	</fieldset>

</div>

<script src="CoLR.js"></script>

<script>

function $(query, parent) {
	return (parent||document).querySelector(query);
}


$('#compile').addEventListener('click', function () {
	$('#compile').innerHTML = 'Compiling...';
	var src = $('#source').value;
	$('#source-size').innerHTML = src.length;
	setTimeout(function () {
		var result = lastResort(src);
		$('#result').value = result;
		$('#result-size').innerHTML = result.length;
		$('#diff').innerHTML = ((1 - (result.length / src.length)) * 100).toPrecision(3) + '%';
		$('#run').innerHTML = 'Compile';
	}, 4);
}, false);


</script>

</body>
</html>